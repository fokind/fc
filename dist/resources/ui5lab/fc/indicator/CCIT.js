sap.ui.define(["ui5lab/fc/Chart","ui5lab/fc/library","ui5lab/fc/thirdparty/d3","ui5lab/fc/thirdparty/moment-with-locales"],function(e){"use strict";return e.extend("ui5lab.fc.indicator.CCIT",{metadata:{properties:{overboughtZone:"float",oversoldZone:"float"},aggregations:{items:{type:"ui5lab.fc.indicator.CCITItem",multiple:true}}},renderer:{},onAfterRendering:function(){var t=this;e.prototype.onAfterRendering.apply(t);var a=t.getItems();if(!a||a.length<2)return;var r=d3.min(a,e=>e.getY());var i=d3.max(a,e=>e.getY());var l=.8;var o=d3.select("#"+t.getId());var n=o.select("svg");var c=n.select(".fcPlotArea");var s=+c.attr("height");var d=moment(a[0].getTime()).toDate();var g=moment(a[1].getTime()).diff(d,"m");var m=t.getTimeScale();n.select(".fcAxisBottom").attr("transform",`translate(0, ${s})`).call(d3.axisBottom(m));var f=m(moment(d).add(g,"m").toDate());var v=t.getYScale(r,i);n.select(".fcAxisLeft").call(d3.axisLeft(v));var h=c.select(".fcSeries");var u=t.getOverboughtZone();var p=t.getOversoldZone();var x=h.selectAll().data(a).enter().append("g").classed("fcBullish",e=>e.getY()>u).classed("fcBearish",e=>e.getY()<p).classed("fcNone",e=>e.getY()>=p&&e.getY()<=u);x.append("rect").classed("fcCandleBody",true).attr("x",e=>m(moment(e.getTime()).toDate())+(1-l)*f/2).attr("y",e=>v(Math.max(e.getY(),0))).attr("height",e=>Math.max(1,v(Math.min(e.getY(),0))-v(Math.max(e.getY(),0)))).attr("width",l*f)}})});