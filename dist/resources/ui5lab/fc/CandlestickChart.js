sap.ui.define(["ui5lab/fc/Chart","ui5lab/fc/library","ui5lab/fc/thirdparty/d3","ui5lab/fc/thirdparty/moment-with-locales"],function(e){"use strict";return e.extend("ui5lab.fc.CandlestickChart",{metadata:{aggregations:{items:{type:"ui5lab.fc.Candle",multiple:true}}},renderer:{},_onResize:function(t){var a=this;e.prototype._onResize.apply(a,[t]);var r=a.getItems();if(!r||r.length<2)return;var l=d3.min(r,e=>e.getLow());var i=d3.max(r,e=>e.getHigh());var s=.8;var n=d3.select("#"+a.getId());var m=n.select("svg");var c=m.select(".fcPlotArea");var o=+c.attr("height");var g=a.getStart();var d=a.getEnd();var f=moment(g).toDate();var h=+a.getTimeframe();var p=a.getTimeScale();m.select(".fcAxisBottom").attr("transform",`translate(0, ${o})`).call(d3.axisBottom(p));var v=p(moment(f).add(h,"m").toDate());var u=a.getYScale(l,i);m.select(".fcAxisLeft").call(d3.axisLeft(u));var x=c.select(".fcSeries");x.selectAll("*").remove();var C=x.selectAll().data(r).enter().filter(e=>moment(e.getTime()).isBetween(g,d,"m","[]")).append("g").classed("fcBullish",e=>e.getClose()>=e.getOpen()).classed("fcBearish",e=>e.getClose()<e.getOpen());C.append("line").classed("fcCandleShadow",true).attr("x1",e=>p(moment(e.getTime()).toDate())+v/2).attr("x2",e=>p(moment(e.getTime()).toDate())+v/2).attr("y1",e=>u(e.getHigh())).attr("y2",e=>u(e.getLow()));C.append("rect").classed("fcCandleBody",true).attr("x",e=>p(moment(e.getTime()).toDate())+(1-s)*v/2).attr("y",e=>u(Math.max(e.getOpen(),e.getClose()))).attr("height",e=>Math.max(1,u(Math.min(e.getOpen(),e.getClose()))-u(Math.max(e.getOpen(),e.getClose())))).attr("width",s*v)}})});