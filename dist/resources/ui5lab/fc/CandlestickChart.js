sap.ui.define(["ui5lab/fc/Chart","ui5lab/fc/library","ui5lab/fc/thirdparty/d3","ui5lab/fc/thirdparty/moment-with-locales"],function(e){"use strict";return e.extend("ui5lab.fc.CandlestickChart",{metadata:{aggregations:{items:{type:"ui5lab.fc.Candle",multiple:true}}},renderer:{},onAfterRendering:function(){var t=this;e.prototype.onAfterRendering.apply(t);var a=t.getItems();if(!a||a.length<2)return;var r=d3.min(a,e=>e.getLow());var l=d3.max(a,e=>e.getHigh());var i=.8;var n=d3.select("#"+t.getId());var s=n.select("svg");var g=s.select(".fcPlotArea");var m=+g.attr("height");var c=t.getStart();var o=t.getEnd();var d=moment(c).toDate();var f=+t.getTimeframe();var h=t.getTimeScale();s.select(".fcAxisBottom").attr("transform",`translate(0, ${m})`).call(d3.axisBottom(h));var p=h(moment(d).add(f,"m").toDate());var v=t.getYScale(r,l);s.select(".fcAxisLeft").call(d3.axisLeft(v));var u=g.select(".fcSeries");var x=u.selectAll().data(a).enter().filter(e=>moment(e.getTime()).isBetween(c,o,"m","[]")).append("g").classed("fcBullish",e=>e.getClose()>=e.getOpen()).classed("fcBearish",e=>e.getClose()<e.getOpen());x.append("line").classed("fcCandleShadow",true).attr("x1",e=>h(moment(e.getTime()).toDate())+p/2).attr("x2",e=>h(moment(e.getTime()).toDate())+p/2).attr("y1",e=>v(e.getHigh())).attr("y2",e=>v(e.getLow()));x.append("rect").classed("fcCandleBody",true).attr("x",e=>h(moment(e.getTime()).toDate())+(1-i)*p/2).attr("y",e=>v(Math.max(e.getOpen(),e.getClose()))).attr("height",e=>Math.max(1,v(Math.min(e.getOpen(),e.getClose()))-v(Math.max(e.getOpen(),e.getClose())))).attr("width",i*p)}})});