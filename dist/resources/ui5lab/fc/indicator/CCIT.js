sap.ui.define(["ui5lab/fc/Chart","ui5lab/fc/library","ui5lab/fc/thirdparty/d3","ui5lab/fc/thirdparty/moment-with-locales"],function(e){"use strict";return e.extend("ui5lab.fc.indicator.CCIT",{metadata:{properties:{overboughtZone:"float",oversoldZone:"float"},aggregations:{items:{type:"ui5lab.fc.indicator.CCITItem",multiple:true}}},renderer:{},onAfterRendering:function(){var t=this;e.prototype.onAfterRendering.apply(t);var a=t.getItems();if(!a||a.length<2)return;var r=d3.min(a,e=>e.getY());var i=d3.max(a,e=>e.getY());var l=.8;var n=d3.select("#"+t.getId());var o=n.select("svg");var s=o.select(".fcPlotArea");var c=+s.attr("height");var d=t.getStart();var g=t.getEnd();var m=moment(d).toDate();var f=+t.getTimeframe();var v=t.getTimeScale();o.select(".fcAxisBottom").attr("transform",`translate(0, ${c})`).call(d3.axisBottom(v));var h=v(moment(m).add(f,"m").toDate());var u=t.getYScale(r,i);o.select(".fcAxisLeft").call(d3.axisLeft(u));var p=s.select(".fcSeries");var x=t.getOverboughtZone();var Y=t.getOversoldZone();var b=p.selectAll().data(a).enter().filter(e=>moment(e.getTime()).isBetween(d,g,"m","[]")).append("g").classed("fcBullish",e=>e.getY()>x).classed("fcBearish",e=>e.getY()<Y).classed("fcNone",e=>e.getY()>=Y&&e.getY()<=x);b.append("rect").classed("fcCandleBody",true).attr("x",e=>v(moment(e.getTime()).toDate())+(1-l)*h/2).attr("y",e=>u(Math.max(e.getY(),0))).attr("height",e=>Math.max(1,u(Math.min(e.getY(),0))-u(Math.max(e.getY(),0)))).attr("width",l*h)}})});